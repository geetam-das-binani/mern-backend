import{r as d,b9 as O,u as b,bi as N,a as y,Q as u,bT as D,c4 as P,c5 as k,j as e,bh as $,k as E}from"./index-66c83e19.js";import{S as C}from"./Sidebar-0cbec06d.js";import{M as L}from"./Metadata-772d0c81.js";import{g as U,u as w}from"./orderActions-1c4d0c14.js";import{L as A}from"./Loader-795ab423.js";import{d as T}from"./AccountTree-1181b621.js";import{B as F}from"./ButtonLoader-9b465361.js";import{T as l}from"./Typography-c35deaa4.js";import{a as M}from"./Button-151706a8.js";import"./Collapse-f7713fb3.js";function g(t,r){return t===r?t!==0||r!==0||1/t===1/r:t!==t&&r!==r}function H(t,r){if(g(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;const a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;for(let i=0;i<a.length;i++)if(!Object.prototype.hasOwnProperty.call(r,a[i])||!g(t[a[i]],r[a[i]]))return!1;return!0}function Q(){const{id:t}=O(),r=b(),a=N(),[o,i]=d.useState(""),[f,p]=d.useState(!1),{order:s,error:m,loading:I}=y(n=>n.myOrderDetails,H),{error:h,isUpdated:x}=y(n=>n.deleteUpdateOrderAdmin),S=n=>{n.preventDefault();const c=new FormData;c.set("status",o),p(!0),w(r,c,t)};return d.useEffect(()=>{m&&(u.error(m,{theme:"dark"}),r(D())),h&&(u.error(h,{theme:"dark"}),r(P()),p(!1)),x&&(u.success(" Order Status Updated Successfully",{theme:"dark"}),r(k()),p(!1)),U(r,t)},[t,m,a,h,x,r]),e.jsxs(d.Fragment,{children:[e.jsx(L,{title:"Process Order"}),e.jsxs("div",{className:"dashboard",children:[e.jsx(C,{}),e.jsx("div",{className:"new__product__container",children:I?e.jsx(A,{}):e.jsxs("div",{className:"confirm__order__page",style:{display:s.paymentInfo.orderStatus==="Delivered"?"block":"grid"},children:[e.jsxs("div",{className:"confirm__shipping__area",children:[e.jsx(l,{children:"Shipping Info "}),e.jsxs("div",{className:"order__details__container__box",children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name:"}),e.jsx("span",{children:s.user&&s.user.name})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Phone:"}),e.jsx("span",{children:s.shippingInfo&&s.shippingInfo.phoneNo})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Address:"}),e.jsx("span",{children:s.shippingInfo&&`${s.shippingInfo.address} ,${s.shippingInfo.city},${s.shippingInfo.state} ,${s.shippingInfo.country},
                      ${s.shippingInfo.pincode}`})]})]}),e.jsx(l,{children:"Payment"}),e.jsxs("div",{className:"order__details__container__box",children:[e.jsx("div",{children:e.jsx("p",{className:s.paymentInfo&&s.paymentInfo.status==="succeeded"?"green_Color":"red_Color",children:s.paymentInfo&&s.paymentInfo.status==="succeeded"?"PAID":"NOT PAID"})}),e.jsxs("div",{children:[e.jsx("p",{children:"Amount"}),e.jsx("span",{children:s.paymentInfo&&s.paymentInfo.totalPrice})]})]}),e.jsx(l,{children:"Order Status"}),e.jsx("div",{className:"order__details__container__box",children:e.jsx("div",{children:e.jsx("p",{className:s.paymentInfo&&s.paymentInfo.orderStatus==="Delivered"?"green_Color":"red_Color",children:s.paymentInfo&&s.paymentInfo.orderStatus})})}),e.jsxs("div",{className:"confirm__cart__items",children:[e.jsx(l,{children:"Order Items:"}),e.jsx("div",{className:"confirm__cart__items__container",children:s.orderItems&&s.orderItems.map(({image:n,name:c,price:_,product:j,quantity:v})=>e.jsxs("div",{children:[e.jsx("img",{src:n,alt:"productImage"}),e.jsx($,{to:`/product/${j}`,children:c}),e.jsxs("span",{children:[_," X ",v,"= ",e.jsx("b",{children:_*v})]})]},j))})]})]}),e.jsx("div",{style:{borderLeft:"1px solid rgba(0, 0, 0, 0.11)",display:s.paymentInfo.orderStatus==="Delivered"?"none":"block"},children:e.jsxs("form",{className:"update__order__form",onSubmit:S,children:[e.jsx("h1",{children:" Process Order"}),e.jsxs("div",{children:[e.jsx(T,{}),e.jsxs("select",{onChange:({target:n})=>i(n.value),children:[e.jsx("option",{value:"",children:"Status"}),s.paymentInfo.orderStatus==="Processing"&&e.jsx("option",{value:"Shipped",children:"Shipped"}),s.paymentInfo.orderStatus==="Shipped"&&e.jsx("option",{value:"Delivered",children:"Delivered"})]})]}),e.jsx(M,{id:"update__order__btn",type:"submit",disabled:!!(f||o===""),children:f?e.jsx(F,{}):"Process"})]})})]})})]}),e.jsx(E,{})]})}const Z=d.memo(Q);export{Z as default};
