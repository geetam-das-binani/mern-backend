import{a as F,bi as B,u as G,r,Q as m,bj as v,bk as b,bl as I,j as e,bh as L,k as O,bm as M,bn as Q}from"./index-1dce364e.js";import{L as z}from"./Loader-f12eced5.js";import{d as H,a as J}from"./LockOpen-eec3fa1e.js";import{d as K}from"./Face-6bc50370.js";import{d as w}from"./MailOutline-80946b74.js";import{d as V}from"./Phone-25daa6b5.js";import{B as N}from"./ButtonLoader-7a9dfb32.js";function re(){const{error:o,isAuthenticatedUser:g,loginRegisterNotify:f,loading:S,showloginTab:y,showRegisterTab:R}=F(s=>s.user),h=B(),i=G(),[p,U]=r.useState(""),[x,C]=r.useState(""),[d,_]=r.useState(!1),l=r.useRef(null),c=r.useRef(null),a=r.useRef(null),[n,E]=r.useState({name:"",email:"",password:"",phoneNumber:""}),[k,T]=r.useState(""),[P,q]=r.useState("/Profile.png"),D=s=>{s.preventDefault(),_(!0),M(i,x,p)},$=s=>{s.preventDefault();const t=new FormData;t.set("name",n.name),t.set("email",n.email),t.set("password",n.password),t.set("avatar",k),t.set("phoneNumber",n.phoneNumber),_(!0),Q(i,t)},u=s=>{if(s.target.name==="avatar"){const t=new FileReader;t.onload=()=>{t.readyState===2&&(q(t.result),T(t.result))},t.readAsDataURL(s.target.files[0])}else E(t=>({...t,[s.target.name]:s.target.value}))},A=location.search?location.search.split("=")[1]:"account";r.useEffect(()=>{o&&y?(m.error(o,{theme:"dark"}),i(v()),_(!1),a.current.classList.add("shift__to__neutral"),a.current.classList.remove("shift__to__right"),c.current.classList.remove("shift__to__neutral__form"),l.current.classList.remove("shift__to__left")):o&&R&&(m.error(o,{theme:"dark"}),i(v()),_(!1),a.current.classList.add("shift__to__right"),a.current.classList.remove("shift__to__neutral"),c.current.classList.add("shift__to__neutral__form"),l.current.classList.add("shift__to__left")),g&&(f==="Loged in"?(m.success("Log in Successfull",{theme:"dark"}),i(b())):f==="registered"&&(m.success("Registered Successfully",{theme:"dark"}),i(b())),h(`/${A}`)),setTimeout(()=>{i(I(!1))},500)},[i,o,g,h]);const j=(s,t)=>{t==="login"&&(a.current.classList.add("shift__to__neutral"),a.current.classList.remove("shift__to__right"),c.current.classList.remove("shift__to__neutral__form"),l.current.classList.remove("shift__to__left")),t==="register"&&(a.current.classList.add("shift__to__right"),a.current.classList.remove("shift__to__neutral"),c.current.classList.add("shift__to__neutral__form"),l.current.classList.add("shift__to__left"))};return e.jsx(r.Fragment,{children:S?e.jsx(z,{}):e.jsxs(r.Fragment,{children:[e.jsx("div",{className:"login__signUp__container",children:e.jsxs("div",{className:"login__signUp__box",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"login__signUp__toggle",children:[e.jsx("p",{onClick:s=>j(s,"login"),children:"LOGIN"}),e.jsx("p",{onClick:s=>j(s,"register"),children:"REGISTER"})]}),e.jsx("button",{ref:a})]}),e.jsxs("form",{ref:l,className:"login__form",onSubmit:D,children:[e.jsxs("div",{className:"login__email",children:[e.jsx(w,{}),e.jsx("input",{type:"email",placeholder:"email",required:!0,value:x,onChange:({target:s})=>C(s.value)})]}),e.jsxs("div",{className:"login__password",children:[e.jsx(H,{}),e.jsx("input",{type:"password",placeholder:"password",required:!0,value:p,onChange:({target:s})=>U(s.value)})]}),e.jsxs("div",{className:"login__actions",children:[e.jsx(L,{to:"/password/forget",children:"Forgot Password ?"}),e.jsx(L,{to:"/otp/login",children:" Login Using Otp ?"})]}),e.jsx("button",{disabled:d,type:"submit",className:"login__btn",children:d?e.jsx(N,{}):"Login"})]}),e.jsxs("form",{className:"signUp__form",ref:c,encType:"multipart/form-data",onSubmit:$,children:[e.jsxs("div",{className:"signUp__name",children:[e.jsx(K,{}),e.jsx("input",{type:"text",placeholder:"Name",required:!0,name:"name",value:n.name,onChange:u})]}),e.jsxs("div",{className:"signUp__Email",children:[e.jsx(w,{}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,name:"email",value:n.email,onChange:u})]}),e.jsxs("div",{className:"login__password",children:[e.jsx(J,{}),e.jsx("input",{type:"password",placeholder:"Password",required:!0,name:"password",value:n.password,onChange:u})]}),e.jsxs("div",{children:[e.jsx(V,{}),e.jsx("input",{type:"number",placeholder:"Number",required:!0,name:"phoneNumber",value:n.phoneNumber,onChange:u})]}),e.jsxs("div",{id:"register__image",children:[e.jsx("img",{src:P,alt:"Avatar Preview"}),e.jsx("input",{type:"file",name:"avatar",accept:"image/*",required:!0,onChange:u})]}),e.jsx("button",{disabled:d,type:"submit",className:"signUp__btn",children:d?e.jsx(N,{}):"Register"})]})]})}),e.jsx(O,{})]})})}export{re as default};
